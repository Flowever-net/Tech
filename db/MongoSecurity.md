# MongoSecurity
### 起因
	Team3服务器的mongo数据库没有绑定ip，导致数据库开放到外网，被黑客扫描到并进入到我们的数据，删除了生产数据并留下勒索记录。

### 解决方法
##### 恢复绑定本地ip，只允许本地访问：

```
# 登陆服务器
sudo vi /etc/mongod.conf
# 取消 'bingIp' 的注释
bindIp: 127.0.0.1
``` 

##### 解决应用访问不同服务器上的mongo

	由于前面已经限定了mongo数据库只能本地访问，这样外网是无法连接服务器数据库的，不过可以通过在应用所在服务器上建立一个SSH通道，使应用访问特定端口的时候能指向数据库所在地址：

`ssh -L 27000:localhost:27997 hello@team3.flowever.net -p 20`

这里将应用服务器的端口27000绑定到team3服务器的`localhost:27997`, 所以现在应用内只需要访问`localhost:27000`并带上数据库用户和密码就能访问到另外服务器的数据库。